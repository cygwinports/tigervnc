--- origsrc/tigervnc-1.2.0/common/rdr/TLSInStream.cxx	2010-09-30 01:25:28.000000000 -0500
+++ src/tigervnc-1.2.0/common/rdr/TLSInStream.cxx	2012-10-29 23:15:32.885824900 -0500
@@ -27,7 +27,7 @@
 #include <rdr/TLSInStream.h>
 #include <errno.h>
 
-#ifdef HAVE_OLD_GNUTLS
+#if !defined(HAVE_OLD_GNUTLS)
 #define gnutls_transport_set_global_errno(A) do { errno = (A); } while(0)
 #endif
 
--- origsrc/tigervnc-1.2.0/common/rdr/TLSOutStream.cxx	2010-09-30 01:25:28.000000000 -0500
+++ src/tigervnc-1.2.0/common/rdr/TLSOutStream.cxx	2012-10-29 23:15:43.574682200 -0500
@@ -27,7 +27,7 @@
 #include <rdr/TLSOutStream.h>
 #include <errno.h>
 
-#ifdef HAVE_OLD_GNUTLS
+#if !defined(HAVE_OLD_GNUTLS)
 #define gnutls_transport_set_global_errno(A) do { errno = (A); } while(0)
 #endif
 
